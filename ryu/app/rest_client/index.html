<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<!-- Optional theme -->
		<link rel="stylesheet" href="css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
		<script src="js/jquery-1.12.0.min.js"></script>
		<!-- Latest compiled and minified JavaScript -->
		<script src="js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
		<script>
		var tables = {};

		function deleteEntry(number){
			$.ajax({
			  method: "POST",
			  crossDomain: true,
			  data: { mac: tables[number].mac, port: tables[number].port },
			  url: "http://localhost:8080/simpleswitch/mactable/delete/"+tables[number].dpid,
			}).done(function(msg) {
			    updateTable(msg);
			}); 
		}

		function updateTable(dipds){
			console.log(dipds);
			tables = {};
			var isi = "";
			var iterasi = 0;
			$.each(dipds, function(i, macs){
				$.each(macs, function(j, ports){
					iterasi++;
					var obj = {};
					obj.dpid = i;
					obj.mac = j;
					obj.port = ports;
					tables[iterasi] = obj;

					isi += "<tr>";
					isi += "<td>"+i+"</td>";
					isi += "<td>"+j+"</td>";
					isi += "<td>"+ports+"</td>";
					isi += "<td><a href='#' onclick='deleteEntry("+iterasi+")'>Hapus</a></td>";
					isi += "</tr>";
				});
			});
			$(".fill").html(isi);
		}

		$(document).ready(function(){
			$.ajax({
			  method: "GET",
			  crossDomain: true,
			  url: "http://localhost:8080/simpleswitch/mactable",
			}).done(function( msg ) {
			    updateTable(msg);
			});
		});
		</script>
	</head>
	<body>
	<h1>OpenVSwitch Entries</h1><br>
	<div class="row">
	  <div class="col-md-2"></div>
	  <div class="col-md-8"><table class="table table-hover">
		<thead> 
			<tr> 
				<th>DPID</th>
				<th>MAC Address</th>
				<th>Output Port</th>
				<th>Aksi</th>
			</tr>
		</thead>
		<tbody class="fill">
		</tbody>
	</table>
	</div>
	  <div class="col-md-2"></div>
	</div>
	
	<hr><hr>
	
	<div class="row">
	  <div class="col-md-2"></div>
	  <div class="col-md-8"><h2> Edit Entry Form</h2>
	<form>
	  <div class="form-group">
	    <label for="exampleInputEmail1">Email address</label>
	    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
	  </div>
	  <div class="form-group">
	    <label for="exampleInputPassword1">Password</label>
	    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
	  </div>
	  <div class="form-group">
	    <label for="exampleInputFile">File input</label>
	    <input type="file" id="exampleInputFile">
	    <p class="help-block">Example block-level help text here.</p>
	  </div>
	  <div class="checkbox">
	    <label>
	      <input type="checkbox"> Check me out
	    </label>
	  </div>
	  <button type="submit" class="btn btn-default">Submit</button>
	</form></div>
	  <div class="col-md-2"></div>
	</div>
	</body>
</html>